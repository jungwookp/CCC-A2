{
  "_id": "_design/geo",
  "lib": {
    "geofunc": "function inPoly(n,t,a){let f=0;var g=a.length;for(let a=0;a<g;a++){var[r,i]=array[a],[l,h]=array[(a+1)%g];f+=calAngle(r-n,i-t,l-n,h-t)}return!(Math.abs(f)<Math.PI)}function calAngle(a,n,t,f){return ang1=Math.atan2(n,a),ang2=Math.atan2(f,t),diff_ang=ang1-ang2,diff_ang>Math.PI?2*Math.PI-diff_ang:diff_ang<-Math.PI?diff_ang+2*Math:diff_ang}exports.inPoly=inPoly;",
    "polygon": "polygons=[{sa2:\"206041122\",polygon:[[144.96488964899999,-37.80687042299999],[144.96511138600002,-37.8068941769999],[144.965852373,-37.8069730239999],[144.96734365300003,-37.807133399999906],[144.96804755600004,-37.807208288],[144.96884650400003,-37.807293924999904],[144.97093693200003,-37.80751832999991],[144.97128360899998,-37.807555404],[144.971363654,-37.80772808299999],[144.97167817399998,-37.808406810999905],[144.97214004600002,-37.809404015999995],[144.972380763,-37.809923774],[144.972471283,-37.810119245],[144.97258932399998,-37.810374026],[144.972734046,-37.81068615899989],[144.97304615800002,-37.811359706999994],[144.973498685,-37.81233621099991],[144.97362362399994,-37.812605755999996],[144.97395263599995,-37.813315582],[144.974106374,-37.813647508999985],[144.974409871,-37.814302982999905],[144.97444691800004,-37.81437975699999],[144.97455922899994,-37.81462508599999],[144.974656319,-37.81483445099998],[144.974867398,-37.8152898279999],[144.974739977,-37.815314396000005],[144.97363406299996,-37.8156397559999],[144.972381968,-37.816009644999994],[144.97034687300004,-37.816610931999904],[144.96990266799997,-37.816735584999904],[144.96932126,-37.816904877999896],[144.96743986800004,-37.817452534],[144.96825166399998,-37.81922418599989],[144.96797660000001,-37.8192424269999],[144.96717761500003,-37.819339441],[144.966416626,-37.819452457999894],[144.96631665300004,-37.81946644399989],[144.965381632,-37.819613444999995],[144.96477489299997,-37.819712161],[144.964422705,-37.819769454999985],[144.96368467399995,-37.81992546499999],[144.96302866,-37.8201014749999],[144.96138272899998,-37.8205144689999],[144.96062272599997,-37.8207544869999],[144.960002737,-37.821044492999896],[144.959030742,-37.821512487999904],[144.95808422399998,-37.8219737859999],[144.95785077,-37.82208750499999],[144.956913304,-37.822591001],[144.95598708000003,-37.82305324200001],[144.955734975,-37.822519941999914],[144.955357528,-37.821698931],[144.95515345700002,-37.82126554999999],[144.955074982,-37.82109906899999],[144.95462136,-37.82009844],[144.95439316099998,-37.819601141999996],[144.95414905000004,-37.819069821999996],[144.953913953,-37.81855890799991],[144.953694588,-37.81808168199999],[144.95323968900001,-37.81709198699999],[144.952792198,-37.816118092],[144.95234076600002,-37.815136648000006],[144.95189068500002,-37.814158516],[144.95180728200003,-37.813976900999904],[144.95164679200002,-37.8136273069999],[144.95143534700006,-37.8131668239999],[144.95190875200004,-37.8130334379999],[144.95267452299998,-37.8128176179999],[144.953096025,-37.812698828999906],[144.95333426,-37.81262769699999],[144.95392154500001,-37.81246617299999],[144.95428081400001,-37.812365015],[144.95494642900002,-37.8121774439999],[144.95644654200007,-37.81175481099999],[144.956056649,-37.810915522],[144.95594485000004,-37.81067459599999],[144.955473707,-37.809659851999996],[144.955392823,-37.8094869889999],[144.955594815,-37.8082792719999],[144.95568569899996,-37.807723771999996],[144.955987591,-37.8058781939999],[144.95711266700002,-37.8060015149999],[144.958253,-37.806141004],[144.95845776500002,-37.806149680999994],[144.959504037,-37.806293240999906],[144.95993641600003,-37.806339602],[144.96081749,-37.80643336],[144.96141685600006,-37.8064976109999],[144.961842009,-37.8065440089999],[144.962453748,-37.8066096649999],[144.96289718700004,-37.8066562669999],[144.96337307399997,-37.8067072709999],[144.96437102099998,-37.806814238],[144.96488964899999,-37.80687042299999]]}],exports.polygons=polygons;"
  },
  "views": {
    "test-geo": {
      "map": "function (o){if(\"melbourne\"===o.properties.location){const e=require(\"lib/polygon\"),t=require(\"lib/geofunc\");var[r,i]=o.geometry.coordinates;e.polygons.forEach(e=>{t.inPoly(r,i,e.polygon)&&emit([e.sa2,o.properties.created_at],o.properties.text)})}}",
      "reduce": "_count"
    }
  }
}